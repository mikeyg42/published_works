<!-- modal.component.html -->
<div
  class="modal-overlay"
  role="dialog"
  aria-modal="true"
  aria-labelledby="modal-title"
  (click)="onOverlayClick($event)"
>
  <div
    class="modal-content"
    #modalContent
    tabindex="-1"
    role="document"
    aria-label="Media viewer"
  >
    <!-- Close Button -->
    <button
      class="close-btn"
      aria-label="Close modal"
      (click)="close()"
      type="button"
    >
      <span aria-hidden="true">&times;</span>
      <span class="sr-only">Close</span>
    </button>

    <!-- Media Container -->
    <div 
      id="modalImageContainer"
      #mediaContainer
      class="media-container"
      (click)="onMediaContainerClick($event)"
      role="region"
      aria-label="Media content"
    >
      <ng-container *ngIf="!isVideo">
        <img
          id="modalImage"
          class="modal-content-img"
          [src]="src"
          [alt]="imageAlt || 'Modal content'"
          [style.transform]="'scale(' + currentZoom + ')'"
          (dblclick)="toggleZoom()"
          (load)="onMediaLoad($event)"
          (error)="onMediaError($event)"
        />
      </ng-container>
      <ng-container *ngIf="isVideo">
        <video
          #mediaElement
          [src]="src"
          controls
          autoplay
          class="modal-content-img"
          [style.transform]="'scale(' + currentZoom + ')'"
          (dblclick)="toggleZoom()"
          (loadedmetadata)="onMediaLoad($event)"
          (error)="onMediaError($event)"
          aria-label="Video content"
        >
          Your browser does not support the video tag.
        </video>
      </ng-container>
    </div>

    <!-- Zoom Controls -->
    <div 
      class="zoom-controls"
      role="group" 
      aria-label="Zoom controls"
    >
      <button
        id="zoomin"
        class="zoomButton"
        (click)="zoomIn()"
        aria-label="Zoom In"
        [disabled]="isMaxZoom"
        type="button"
      >
        <span aria-hidden="true">+</span>
      </button>
      <button
        id="zoomout"
        class="zoomButton"
        (click)="zoomOut()"
        aria-label="Zoom Out"
        [disabled]="isMinZoom"
        type="button"
      >
        <span aria-hidden="true">-</span>
      </button>
    </div>

    <!-- Loading Indicator -->
    <div 
      *ngIf="!isMediaLoaded && !hasError" 
      class="loading-spinner"
      role="status"
      aria-live="polite"
    >
      <span class="sr-only">Loading media...</span>
    </div>

    <!-- Error Message -->
    <div 
      *ngIf="hasError" 
      class="error-message"
      role="alert"
    >
      Failed to load media. Please try again later.
    </div>
  </div>
</div>
